---
layout:     post
title:      å°ç¨‹åº
summary:
categories: Applet
technique: true
---

## | æ³¨å†Œç¨‹åº App(Object)

App() å‡½æ•°ç”¨æ¥æ³¨å†Œä¸€ä¸ªå°ç¨‹åºã€‚æ¥å—ä¸€ä¸ª Object å‚æ•°ï¼Œå…¶æŒ‡å®šå°ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸå›è°ƒç­‰ã€‚
**App() å¿…é¡»åœ¨ app.js ä¸­è°ƒç”¨ï¼Œå¿…é¡»è°ƒç”¨ä¸”åªèƒ½è°ƒç”¨ä¸€æ¬¡ã€‚**

- onLaunchï¼šç›‘å¬å°ç¨‹åºåˆå§‹åŒ–ï¼›å°ç¨‹åºåˆå§‹åŒ–å®Œæˆæ—¶ï¼ˆå…¨å±€åªè§¦å‘ä¸€æ¬¡ï¼‰
- onShowï¼šç›‘å¬å°ç¨‹åºæ˜¾ç¤ºï¼›å°ç¨‹åºå¯åŠ¨ï¼Œæˆ–ä»åå°è¿›å…¥å‰å°æ˜¾ç¤ºæ—¶è§¦å‘
- onHideï¼šç›‘å¬å°ç¨‹åºéšè—ï¼›å°ç¨‹åºä»å‰å°è¿›å…¥åå°æ—¶è§¦å‘
- onErrorï¼šé”™è¯¯ç›‘å¬å‡½æ•°ï¼›å°ç¨‹åºå‘ç”Ÿè„šæœ¬é”™è¯¯ï¼Œæˆ–è€… api è°ƒç”¨å¤±è´¥æ—¶è§¦å‘ï¼Œä¼šå¸¦ä¸Šé”™è¯¯ä¿¡æ¯
- onPageNotFoundï¼šé¡µé¢ä¸å­˜åœ¨ç›‘å¬å‡½æ•°
- è‡ªå®šä¹‰ï¼šä»»æ„æ•°æ®ï¼Œç”¨ this è®¿é—®ï¼›ï¼ˆå…¨å±€å˜é‡ï¼‰

å‰å°ã€åå°å®šä¹‰ï¼š å½“ç”¨æˆ·ç‚¹å‡»å·¦ä¸Šè§’å…³é—­ï¼Œæˆ–è€…æŒ‰äº†è®¾å¤‡ Home é”®ç¦»å¼€å¾®ä¿¡ï¼Œå°ç¨‹åºå¹¶æ²¡æœ‰ç›´æ¥é”€æ¯ï¼Œè€Œæ˜¯è¿›å…¥äº†åå°ï¼›å½“å†æ¬¡è¿›å…¥å¾®ä¿¡æˆ–å†æ¬¡æ‰“å¼€å°ç¨‹åºï¼Œåˆä¼šä»åå°è¿›å…¥å‰å°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåªæœ‰å½“å°ç¨‹åºè¿›å…¥åå°ä¸€å®šæ—¶é—´ï¼Œæˆ–è€…ç³»ç»Ÿèµ„æºå ç”¨è¿‡é«˜ï¼Œæ‰ä¼šè¢«çœŸæ­£çš„é”€æ¯ã€‚

```javascript
App({
  onLaunch: function(options) {
    // Do something initial when launch.
  },
  onShow: function(options) {
    // Do something when show.
  },
  onHide: function() {
    // Do something when hide.
  },
  onError: function(msg) {
    console.log(msg)
  },
  globalData: 'I am global data'
})
```

**getApp(Object)** å…¨å±€çš„ getApp() å‡½æ•°å¯ä»¥ç”¨æ¥è·å–åˆ°å°ç¨‹åº App å®ä¾‹ã€‚

Object å‚æ•°è¯´æ˜ï¼š

```javascript
// other.js
var appInstance = getApp()
console.log(appInstance.globalData) // I am global data
```

æ³¨æ„ï¼šä¸è¦åœ¨å®šä¹‰äº App() å†…çš„å‡½æ•°ä¸­è°ƒç”¨ getApp() ï¼Œä½¿ç”¨ this å°±å¯ä»¥æ‹¿åˆ° app å®ä¾‹ã€‚


## | æ³¨å†Œé¡µé¢ Page(Object)

Page(Object) å‡½æ•°ç”¨æ¥æ³¨å†Œä¸€ä¸ªé¡µé¢ã€‚æ¥å—ä¸€ä¸ª Object ç±»å‹å‚æ•°ï¼Œå…¶æŒ‡å®šé¡µé¢çš„åˆå§‹æ•°æ®ã€ç”Ÿå‘½å‘¨æœŸå›è°ƒã€äº‹ä»¶å¤„ç†å‡½æ•°ç­‰ã€‚

- dataï¼šé¡µé¢çš„åˆå§‹æ•°æ®
- onLoadï¼šç”Ÿå‘½å‘¨æœŸå›è°ƒâ€”ç›‘å¬é¡µé¢åŠ è½½
- onShowï¼šç”Ÿå‘½å‘¨æœŸå›è°ƒâ€”ç›‘å¬é¡µé¢æ˜¾ç¤º
- onReadyï¼šç”Ÿå‘½å‘¨æœŸå›è°ƒâ€”ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ
- onHideï¼šç”Ÿå‘½å‘¨æœŸå›è°ƒâ€”ç›‘å¬é¡µé¢éšè—
- onUnloadï¼šç”Ÿå‘½å‘¨æœŸå›è°ƒâ€”ç›‘å¬é¡µé¢å¸è½½
- onPullDownRefreshï¼šç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ
- onReachBottomï¼šé¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•°
- onShareAppMessageï¼šç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’è½¬å‘
- onPageScrollï¼šé¡µé¢æ»šåŠ¨è§¦å‘äº‹ä»¶çš„å¤„ç†å‡½æ•°
- onTabItemTapï¼šå½“å‰æ˜¯ tab é¡µæ—¶ï¼Œç‚¹å‡» tab æ—¶è§¦å‘
- è‡ªå®šä¹‰ï¼šä»»æ„æ•°æ®ï¼Œåœ¨é¡µé¢çš„å‡½æ•°ä¸­ç”¨ this å¯ä»¥è®¿é—®

```javascript
//index.js
Page({
  data: {
    text: "This is page data."
  },
  onLoad: function(options) {
    // é¡µé¢åŠ è½½æ—¶è§¦å‘ï¼Œä¸€ä¸ªé¡µé¢åªä¼šè°ƒç”¨ä¸€æ¬¡
    // å¯ä»¥åœ¨ onLoad çš„å‚æ•°ä¸­è·å–æ‰“å¼€å½“å‰é¡µé¢è·¯å¾„ä¸­çš„å‚æ•°ã€‚
  },
  onReady: function() {
    // -ä¸€ä¸ªé¡µé¢åªä¼šè°ƒç”¨ä¸€æ¬¡
    // ä»£è¡¨é¡µé¢å·²ç»å‡†å¤‡å¦¥å½“ï¼Œå¯ä»¥å’Œè§†å›¾å±‚è¿›è¡Œäº¤äº’ã€‚
  },
  onShow: function() {
    // -é¡µé¢æ˜¾ç¤º/åˆ‡å…¥å‰å°æ—¶è§¦å‘
  },
  onHide: function() {
    // é¡µé¢éšè—/åˆ‡å…¥åå°æ—¶è§¦å‘ã€‚ å¦‚ navigateTo æˆ–åº•éƒ¨ tab åˆ‡æ¢åˆ°å…¶ä»–é¡µé¢ï¼Œå°ç¨‹åºåˆ‡å…¥åå°ç­‰ã€‚
  },
  onUnload: function() {
    // é¡µé¢å¸è½½æ—¶è§¦å‘ã€‚å¦‚redirectToæˆ–navigateBackåˆ°å…¶ä»–é¡µé¢æ—¶ã€‚//////////////////////
  },
  onPullDownRefresh: function() {
    // éœ€è¦åœ¨app.jsonçš„windowé€‰é¡¹ä¸­æˆ–é¡µé¢é…ç½®ä¸­å¼€å¯enablePullDownRefreshã€‚
    // å¯é€šè¿‡wx.startPullDownRefreshè§¦å‘ä¸‹æ‹‰åˆ·æ–°ï¼Œè°ƒç”¨åè§¦å‘ä¸‹æ‹‰åˆ·æ–°åŠ¨ç”»ï¼Œæ•ˆæœä¸ç”¨æˆ·æ‰‹åŠ¨ä¸‹æ‹‰åˆ·æ–°ä¸€è‡´ã€‚
    // å½“å¤„ç†å®Œæ•°æ®åˆ·æ–°åï¼Œwx.stopPullDownRefreshå¯ä»¥åœæ­¢å½“å‰é¡µé¢çš„ä¸‹æ‹‰åˆ·æ–°ã€‚
  },
  onReachBottom: function() {
    // å¯ä»¥åœ¨app.jsonçš„windowé€‰é¡¹ä¸­æˆ–é¡µé¢é…ç½®ä¸­è®¾ç½®è§¦å‘è·ç¦»onReachBottomDistanceã€‚
    // åœ¨è§¦å‘è·ç¦»å†…æ»‘åŠ¨æœŸé—´ï¼Œæœ¬äº‹ä»¶åªä¼šè¢«è§¦å‘ä¸€æ¬¡ã€‚
  },
  onShareAppMessage: function (Object) {
    // from è½¬å‘äº‹ä»¶æ¥æº buttonï¼šé¡µé¢å†…è½¬å‘æŒ‰é’®ï¼› menuï¼šå³ä¸Šè§’è½¬å‘èœå•
    // target å¦‚æœ from å€¼æ˜¯ buttonï¼Œåˆ™ target æ˜¯è§¦å‘è¿™æ¬¡è½¬å‘äº‹ä»¶çš„ buttonï¼Œå¦åˆ™ä¸º undefined
    // webViewUrl é¡µé¢ä¸­åŒ…å«<web-view>ç»„ä»¶æ—¶ï¼Œ  è¿”å›å½“å‰<web-view>çš„url
    // æ­¤äº‹ä»¶éœ€è¦ return ä¸€ä¸ª Objectï¼Œç”¨äºè‡ªå®šä¹‰è½¬å‘å†…å®¹ï¼Œè¿”å›å†…å®¹ï¼štitle/path/imageUrl
    // if (res.from === 'button') {
    //   // æ¥è‡ªé¡µé¢å†…è½¬å‘æŒ‰é’®
    //   console.log(res.target)
    // }
    // return {
    //   title: 'è‡ªå®šä¹‰è½¬å‘æ ‡é¢˜',
    //   path: '/page/user?id=123'
    // }
  },
  onPageScroll: function(Object) {
    // scrollTop	Number	é¡µé¢åœ¨å‚ç›´æ–¹å‘å·²æ»šåŠ¨çš„è·ç¦»ï¼ˆå•ä½pxï¼‰
  },
  onTabItemTap(item) {
    console.log(item.index)
    console.log(item.pagePath)
    console.log(item.text)
  },
  // Event handler.
  viewTap: function() {
    this.setData({
      text: 'Set some data for updating view.'
    }, function() {
      // this is setData callback
    })
  },
  customData: {
    hi: 'MINA'
  }
})
```

## | è‡ªå®šä¹‰ç»„ä»¶


#### é…ç½®æ–‡ä»¶ JSON

è‡ªå®šä¹‰ç»„ä»¶ json ä¸­è®¾ç½®ï¼š `"component": true`

å¼•ç”¨è‡ªå®šä¹‰ç»„ä»¶çš„é¡µé¢ json è®¾ç½®ï¼š

```javascript
{
    "usingComponents": {
        "component-tag-name": "../component/component"
    }
}
```

#### WXMLæ–‡ä»¶

åœ¨ç»„ä»¶æ¨¡æ¿ä¸­å¯ä»¥æä¾›ä¸€ä¸ª <slot> èŠ‚ç‚¹ï¼Œç”¨äºæ‰¿è½½ç»„ä»¶å¼•ç”¨æ—¶æä¾›çš„å­èŠ‚ç‚¹ã€‚éœ€è¦ä½¿ç”¨å¤šslotæ—¶ï¼Œå¯ä»¥åœ¨ç»„ä»¶jsä¸­å£°æ˜å¯ç”¨ options: {multipleSlots: true }ï¼Œä»¥ä¸åŒçš„ name æ¥åŒºåˆ†ã€‚

```html
<!-- è‡ªå®šä¹‰ç»„ä»¶çš„å†…éƒ¨ WXML ç»“æ„(component.wxml)-->
<view class='wapper'>
  <text>this is component</text>
  <slot name="slot1"></slot>
  æˆ‘åœ¨ä¸­é—´
  <slot name="slot2"></slot>
</view>

<!-- ä»¥ä¸‹æ˜¯å¯¹ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶çš„å¼•ç”¨ (page.wxml)-->
<view>
  <text>This is Page</text>
  <component-tag-name inner-text="Some text" class="page-component">
    <view slot="slot1" class="slot">æ¥è‡ªpageé¡µé¢ï¼Œé€šè¿‡slotæ ‡ç­¾</view>
    <view slot="slot2"></view>
  </component-tag-name>
</view>
```

```javascript
// è‡ªå®šä¹‰ç»„ä»¶ js (component.js)
Component({
  options: {
    multipleSlots: true // åœ¨ç»„ä»¶å®šä¹‰æ—¶çš„é€‰é¡¹ä¸­å¯ç”¨å¤šslotæ”¯æŒ
  },
  properties: {
    // è¿™é‡Œå®šä¹‰äº†innerTextå±æ€§ï¼Œå±æ€§å€¼å¯ä»¥åœ¨ç»„ä»¶ä½¿ç”¨æ—¶æŒ‡å®š
    innerText: {
      type: String,
      value: 'default value', //ä¸å­˜åœ¨æ­¤å±æ€§æ—¶
    }
  },
  data: {
    // è¿™é‡Œæ˜¯ä¸€äº›ç»„ä»¶å†…éƒ¨æ•°æ®
    someData: {}
  },
  methods: {
    // è¿™é‡Œæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æ–¹æ³•
    customMethod: function(){}
  }
})
```

æ³¨ï¼šé™¤ç»§æ‰¿æ ·å¼ï¼ˆfont/colorç­‰ï¼‰å¤–ï¼Œapp.wxss ä¸­çš„æ ·å¼ã€ç»„ä»¶æ‰€åœ¨é¡µé¢çš„çš„æ ·å¼å¯¹è‡ªå®šä¹‰ç»„ä»¶æ— æ•ˆã€‚


#### Page ä¸ Component æ•°æ®äº¤äº’

**page > component**
- pageåœ¨å¼•ç”¨ç»„ä»¶æ—¶èƒ½é€šè¿‡å±æ€§å€¼è®¾ç½®ï¼Œcomponent.jsåœ¨propertiesè·å–ã€‚
- pageåœ¨å¼•ç”¨ç»„ä»¶æ—¶é€šdata-xxxè®¾ç½®ï¼Œcomponent.jsåœ¨this.datasetè·å–ã€‚

```javascript
// page.wxml
<component-tag-name fromPage="æ¥è‡ªPage" data-other="from dataset"></component-tag-name>
// component.js
Component({
  properties: {
    formPage: String  //ç®€å†™
    /*
    myProperty: { // å±æ€§å
      type: String, // ç±»å‹ï¼ˆå¿…å¡«ï¼‰ï¼Œ
      // ç›®å‰æ¥å—çš„ç±»å‹åŒ…æ‹¬ï¼šString, Number, Boolean, Object, Array, nullï¼ˆè¡¨ç¤ºä»»æ„ç±»å‹ï¼‰
      value: '', // å±æ€§åˆå§‹å€¼ï¼ˆå¯é€‰ï¼‰ï¼Œå¦‚æœæœªæŒ‡å®šåˆ™ä¼šæ ¹æ®ç±»å‹é€‰æ‹©ä¸€ä¸ª
      observer: function(newVal, oldVal){} // å±æ€§è¢«æ”¹å˜æ—¶æ‰§è¡Œçš„å‡½æ•°ï¼ˆå¯é€‰ï¼‰ï¼Œ
      // ä¹Ÿå¯ä»¥å†™æˆåœ¨methodsæ®µä¸­å®šä¹‰çš„æ–¹æ³•åå­—ç¬¦ä¸², å¦‚ï¼š'_propertyChange'
    }
    */
  },
  attached:function(){
    console.log(this.properties.fromPage);
    console.log(this.data.fromPage); //ç”¨dataä¹Ÿèƒ½è®¿é—®properties
    //è®¾ç½®propertieså€¼ç”¨setData()
    this.setData({
      fromPage: 'æ”¹å˜äº†'
    });
    console.log(this.properties.fromPage);
    //é€šè¿‡datasetè·å–data-otherçš„å€¼
    console.log(this.dataset.other);
  }
})
```

ğŸ‘‰ **çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•**

```html
<!-- çˆ¶é¡µé¢ -->
<button bindtap="uploadImg">ä¸Šä¼ å›¾ç‰‡</button>
<!-- å­ç»„ä»¶ upload-img -->
<upload-img id="upload-img"></upload-img>
```
```javascript
  uploadImg() {
    // è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³• choosePhoto()
    this.selectComponent("#upload-img").choosePhoto();
  },
```

**component > page**

ç»„ä»¶ä¸­çš„å˜é‡è¦ä¼ é€’åˆ° page é¡µé¢å¯ä»¥é€šè¿‡äº‹ä»¶è§¦å‘ this.triggerEvent() æ¥å®è¡Œ

```javascript
// page.wxml
// å½“è‡ªå®šä¹‰ç»„ä»¶è§¦å‘â€œmyeventâ€äº‹ä»¶æ—¶ï¼Œè°ƒç”¨â€œonMyEventâ€æ–¹æ³•
<component-tag-name bindmyevent="onMyEvent" />

//page.js
Page({
  onMyEvent: function(e){
    console.log(e.detail.msg);
  }
})

// component.wxml
// åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸­
<button bindtap="onTap">ç‚¹å‡»è¿™ä¸ªæŒ‰é’®å°†è§¦å‘â€œmyeventâ€äº‹ä»¶</button>

//component.js
Component({
  methods: {
    onTap: function () {
      var myEventDetail = {msg:'æ¥è‡ªcomponentçš„ä¿¡æ¯'} // detailå¯¹è±¡ï¼Œæä¾›ç»™äº‹ä»¶ç›‘å¬å‡½æ•°
      var myEventOption = {} // è§¦å‘äº‹ä»¶çš„é€‰é¡¹
      this.triggerEvent('myevent', myEventDetail, myEventOption)
    }
  }
})
```

#### behaviors

behaviors æ˜¯ç”¨äºç»„ä»¶é—´ä»£ç å…±äº«çš„ç‰¹æ€§ã€‚æ¯ä¸ª behavior å¯ä»¥åŒ…å«ä¸€ç»„å±æ€§ã€æ•°æ®ã€ç”Ÿå‘½å‘¨æœŸå‡½æ•°å’Œæ–¹æ³•ï¼Œç»„ä»¶å¼•ç”¨å®ƒæ—¶ï¼Œå®ƒçš„å±æ€§ã€æ•°æ®å’Œæ–¹æ³•ä¼šè¢«åˆå¹¶åˆ°ç»„ä»¶ä¸­ï¼Œç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¹Ÿä¼šåœ¨å¯¹åº”æ—¶æœºè¢«è°ƒç”¨ã€‚æ¯ä¸ªç»„ä»¶å¯ä»¥å¼•ç”¨å¤šä¸ª behavior ã€‚ behavior ä¹Ÿå¯ä»¥å¼•ç”¨å…¶ä»– behavior ã€‚
behavior éœ€è¦ä½¿ç”¨ Behavior() æ„é€ å™¨å®šä¹‰ã€‚

```javascript
// my-behavior.js
module.exports = Behavior({
  behaviors: [],
  properties: {
    myBehaviorProperty: {
      type: String
    }
  },
  data: {
    myBehaviorData: {}
  },
  attached: function(){},
  methods: {
    myBehaviorMethod: function(){}
  }
})
// ç»„ä»¶å¼•ç”¨æ—¶ï¼Œåœ¨behaviorså®šä¹‰æ®µä¸­å°†å®ƒä»¬é€ä¸ªåˆ—å‡ºå³å¯ã€‚

// my-component.js
var myBehavior = require('my-behavior')
Component({
  behaviors: [myBehavior],
  properties: {
    myProperty: {
      type: String
    }
  },
  data: {
    myData: {}
  },
  attached: function(){},
  methods: {
    myMethod: function(){}
  }
})
```

åœ¨ä¸Šä¾‹ä¸­ï¼Œmy-component ä¸­æœ€ç»ˆåŒ…å« myBehaviorPropertyã€myProperty ä¸¤ä¸ªå±æ€§ï¼ŒmyBehaviorDataã€myData ä¸¤ä¸ªæ•°æ®å­—æ®µï¼Œå’ŒmyBehaviorMethodã€myMethod ä¸¤ä¸ªæ–¹æ³•ã€‚å½“ç»„ä»¶è§¦å‘ attached ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œä¼šä¾æ¬¡è§¦å‘ my-behavior ä¸­çš„ attached ç”Ÿå‘½å‘¨æœŸå‡½æ•°å’Œmy-component ä¸­çš„ attached ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚

ç»„ä»¶å’Œå®ƒå¼•ç”¨çš„ behavior ä¸­å¯ä»¥åŒ…å«åŒåçš„å­—æ®µï¼Œå¯¹è¿™äº›å­—æ®µçš„å¤„ç†æ–¹æ³•å¦‚ä¸‹ï¼š

- å¦‚æœæœ‰åŒåçš„å±æ€§æˆ–æ–¹æ³•ï¼Œç»„ä»¶æœ¬èº«çš„å±æ€§æˆ–æ–¹æ³•ä¼šè¦†ç›– behavior ä¸­çš„å±æ€§æˆ–æ–¹æ³•ï¼Œå¦‚æœå¼•ç”¨äº†å¤šä¸ª behavior ï¼Œåœ¨å®šä¹‰æ®µä¸­é å behavior ä¸­çš„å±æ€§æˆ–æ–¹æ³•ä¼šè¦†ç›–é å‰çš„å±æ€§æˆ–æ–¹æ³•ï¼›
- å¦‚æœæœ‰åŒåçš„æ•°æ®å­—æ®µï¼Œå¦‚æœæ•°æ®æ˜¯å¯¹è±¡ç±»å‹ï¼Œä¼šè¿›è¡Œå¯¹è±¡åˆå¹¶ï¼Œå¦‚æœæ˜¯éå¯¹è±¡ç±»å‹åˆ™ä¼šè¿›è¡Œç›¸äº’è¦†ç›–ï¼›
- ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸ä¼šç›¸äº’è¦†ç›–ï¼Œè€Œæ˜¯åœ¨å¯¹åº”è§¦å‘æ—¶æœºè¢«é€ä¸ªè°ƒç”¨ã€‚å¦‚æœåŒä¸€ä¸ª behavior è¢«ä¸€ä¸ªç»„ä»¶å¤šæ¬¡å¼•ç”¨ï¼Œå®ƒå®šä¹‰çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ã€‚

#### ç»„ä»¶é—´å…³ç³»

ä¸¤ä¸ªè‡ªå®šä¹‰ç»„ä»¶é—´çš„åµŒå¥—å…³ç³»ï¼ˆparentçˆ¶ / child å­/ ancestorç¥–å…ˆ / descendantå­å­™ï¼‰ï¼Œé€šè¿‡relations å®šä¹‰æ®µæ¥ç›¸äº’é—´çš„é€šä¿¡ï¼ˆå¿…é¡»åœ¨ä¸¤ä¸ªç»„ä»¶å®šä¹‰ä¸­éƒ½åŠ å…¥ relations å®šä¹‰ï¼Œå¦åˆ™ä¸ä¼šç”Ÿæ•ˆï¼‰ã€‚

```html
<!-- page.wxml -->
<custom-ul>
  <custom-li> item 1 </custom-li>
  <custom-li> item 2 </custom-li>
</custom-ul>

<!-- component.wxml -->
<view class='wapper'>
  <text>custom-ul</text>
  <slot></slot>
</view>


<!-- children-component.wxml -->
<view>
  <text>li-item</text>
  <slot></slot>
</view>
```

```javascript
//page.json
{
  "usingComponents": {
    "custom-ul": "../component/component",
    "custom-li": "../component/children-component"
  }
}

//component.json
{
  "component": true
}

//children-component.json
{
  "component": true
}
//component.js
Component({
  relations:{
    'children-component': {  //å­ç»„ä»¶ç›¸å¯¹è·¯å¾„
      type: 'child', // å…³è”çš„ç›®æ ‡èŠ‚ç‚¹åº”ä¸ºå­èŠ‚ç‚¹
      linked: function (target) {
        // æ¯æ¬¡æœ‰custom-liè¢«æ’å…¥æ—¶æ‰§è¡Œï¼Œtargetæ˜¯è¯¥èŠ‚ç‚¹å®ä¾‹å¯¹è±¡ï¼Œè§¦å‘åœ¨è¯¥èŠ‚ç‚¹attachedç”Ÿå‘½å‘¨æœŸä¹‹å
        console.log('--linked--');
        console.log(target);
      },
      linkChanged: function (target) {
        // æ¯æ¬¡æœ‰custom-liè¢«ç§»åŠ¨åæ‰§è¡Œï¼Œtargetæ˜¯è¯¥èŠ‚ç‚¹å®ä¾‹å¯¹è±¡ï¼Œè§¦å‘åœ¨è¯¥èŠ‚ç‚¹movedç”Ÿå‘½å‘¨æœŸä¹‹å
      },
      unlinked: function (target) {
        // æ¯æ¬¡æœ‰custom-liè¢«ç§»é™¤æ—¶æ‰§è¡Œï¼Œtargetæ˜¯è¯¥èŠ‚ç‚¹å®ä¾‹å¯¹è±¡ï¼Œè§¦å‘åœ¨è¯¥èŠ‚ç‚¹detachedç”Ÿå‘½å‘¨æœŸä¹‹å
      }
    }
  },
  methods: {
    _getAllLi: function () {
      // ä½¿ç”¨getRelationNodeså¯ä»¥è·å¾—nodesæ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰å·²å…³è”çš„custom-liï¼Œä¸”æ˜¯æœ‰åºçš„
      var nodes = this.getRelationNodes('children-component');
      console.log('--getAllLi--');
      console.log(nodes);
    }
  },
  ready: function () {
    this._getAllLi()
  }
})

//children-component.js
Component({
  data:{
    name: 'name'
  },
  relations: {
    'component': {  //çˆ¶ç»„ä»¶ç›¸å¯¹è·¯å¾„
      type: 'parent', // å…³è”çš„ç›®æ ‡èŠ‚ç‚¹åº”ä¸ºçˆ¶èŠ‚ç‚¹
      linked: function (target) {
        // æ¯æ¬¡è¢«æ’å…¥åˆ°custom-ulæ—¶æ‰§è¡Œï¼Œtargetæ˜¯custom-ulèŠ‚ç‚¹å®ä¾‹å¯¹è±¡ï¼Œè§¦å‘åœ¨attachedç”Ÿå‘½å‘¨æœŸä¹‹å
      },
      linkChanged: function (target) {
        // æ¯æ¬¡è¢«ç§»åŠ¨åæ‰§è¡Œï¼Œtargetæ˜¯custom-ulèŠ‚ç‚¹å®ä¾‹å¯¹è±¡ï¼Œè§¦å‘åœ¨movedç”Ÿå‘½å‘¨æœŸä¹‹å
      },
      unlinked: function (target) {
        // æ¯æ¬¡è¢«ç§»é™¤æ—¶æ‰§è¡Œï¼Œtargetæ˜¯custom-ulèŠ‚ç‚¹å®ä¾‹å¯¹è±¡ï¼Œè§¦å‘åœ¨detachedç”Ÿå‘½å‘¨æœŸä¹‹å
      }
    }
  }
})
```

## | é…ç½®æ–‡ä»¶ app.json

```javascript
{
  // é¡µé¢æ–‡ä»¶çš„è·¯å¾„
  "pages": [
    "pages/index/index"
  ],
  // çª—å£è¡¨ç°
  "window": {
    "navigationBarTitleText": "Demo"
  },
  // è®¾ç½®å¤š tab
  "tabBar": {
    "list": [{
      "pagePath": "pages/index/index",
      "text": "é¦–é¡µ"
    }, {
      "pagePath": "pages/logs/logs",
      "text": "æ—¥å¿—"
    }]
  }
}
```

[ğŸ‘‰ æ›´å¤šå…¨å±€é…ç½®](https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#å…¨å±€é…ç½®)


## | æ›´å¤šè¯´æ˜

- **å¼€å‘ç¯å¢ƒä¸‹ä¸æ ¡éªŒåˆæ³•åŸŸå**ï¼š
   å¾®ä¿¡å¼€å‘è€…å·¥å…·â€”â€”è¯¦æƒ…â€”â€”å‹¾é€‰"ä¸æ ¡éªŒåˆæ³•åŸŸåã€web-viewï¼ˆä¸šåŠ¡åŸŸåï¼‰ã€TLS ç‰ˆæœ¬ä»¥åŠ HTTPS è¯ä¹¦"

- **è·å–è½¬å‘ä¿¡æ¯**ï¼šapp.js onShow ä¸­è·å–ä¿¡æ¯èµ‹å€¼ç»™å…¨å±€å˜é‡ï¼Œé¡µé¢ä¸­è·å–å…¨å±€å˜é‡ã€‚å‰ææ˜¯é¡µé¢å¿…é¡»åœ¨ pages ç›®å½•ä¸‹

[å°ç¨‹åºæ–‡æ¡£](https://mp.weixin.qq.com/debug/wxadoc/introduction/index.html?t=1536548681)

[å¾®ä¿¡å°ç¨‹åºä¹‹é¡µé¢è·¯ç”±(ä¹)](https://www.cnblogs.com/nosqlcoco/p/6195572.html)
